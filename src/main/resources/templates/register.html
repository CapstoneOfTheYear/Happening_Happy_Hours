<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<header th:include="partials :: header(title = 'Register')"></header>


<body>
<nav th:include="partials :: navbar"></nav>

<h1 class="mb-3 text-center">Create an Account</h1>
<div class="container">
    <div class="row">
        <form th:action="@{/login}" method="post" th:object="${user}">
            <label for="accountType">Account Type</label>
            <select class="form-select" aria-label="Default select example" id="accountType">
                <option value="consumer">Consumer</option>
                <option value="business">Business</option>
            </select>
            <div class="col-12" id="consumer">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input class="form-control" name="username" type="text" id="username" th:field="*{username}">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input class="form-control" name="email" type="text" id="email" th:field="*{email}">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input class="form-control" id="password" type="password" th:field="*{password}">
                </div>
            </div>
            <div id="business"></div>
            <button type="submit" class="btn btn-primary mt-3">Submit</button>
        </form>
    </div>
</div>
<footer th:include="partials :: footer"></footer>

<script>
    let businessForm = '';

    let business = $("#business");
    let actType = $("#accountType");

    $(actType).change(function () {
        console.log(actType.val());
        if (actType.val() === "business") {
            businessForm = `<div class="row g-3">
  <div class="col-md-6">
    <label for="validationServer01" class="form-label">Business name</label>
    <input type="text" class="form-control is-valid" id="validationServer01" required>
    <div class="valid-feedback">
      Looks good!
    </div>
  </div>
  <div class="col-md-6">
    <label for="validationServer02" class="form-label">Address</label>
    <input type="text" class="form-control is-valid" id="validationServer02" required>
    <div class="valid-feedback">
      Looks good!
    </div>
  </div>
  <div class="col-md-6">
    <label for="validationServer03" class="form-label">City</label>
    <input type="text" class="form-control is-invalid" id="validationServer03" aria-describedby="validationServer03Feedback" required>
    <div id="validationServer03Feedback" class="invalid-feedback">
      Please provide a valid city.
    </div>
  </div>
  <div class="col-md-3">
    <label for="validationServer04" class="form-label">State</label>
    <select class="form-select is-invalid" id="validationServer04" aria-describedby="validationServer04Feedback" required>
      <option selected disabled value="">Choose...</option>
      <option>...</option>
    </select>
    <div id="validationServer04Feedback" class="invalid-feedback">
      Please select a valid state.
    </div>
  </div>
  <div class="col-md-3">
    <label for="validationServer05" class="form-label">Zip</label>
    <input type="text" class="form-control is-invalid" id="validationServer05" aria-describedby="validationServer05Feedback" required>
    <div id="validationServer05Feedback" class="invalid-feedback">
      Please provide a valid zip.
    </div>
  </div>
  </div>
</div>`
            $("#consumer").toggleClass("col-6");
            business.toggleClass("col-6").append(businessForm);
        } else if (actType.val() === "consumer") {
            business.empty();
        }
    })

</script>

<footer th:replace="partials :: footer"></footer>
</body>
</html>